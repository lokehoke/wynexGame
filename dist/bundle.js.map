{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/js/modules/creatures/creature.js","webpack:///./resources/js/modules/creatures/enemy.js","webpack:///./resources/js/modules/creatures/player.js","webpack:///./resources/js/modules/globalClass/game.js","webpack:///./resources/js/modules/globalClass/state/inerState/place/blocks/block.js","webpack:///./resources/js/modules/globalClass/state/inerState/place/blocks/borderblock.js","webpack:///./resources/js/modules/globalClass/state/inerState/place/blocks/controllerBlock.js","webpack:///./resources/js/modules/globalClass/state/inerState/place/blocks/dirtblock.js","webpack:///./resources/js/modules/globalClass/state/inerState/place/place.js","webpack:///./resources/js/modules/globalClass/state/state.js","webpack:///./resources/js/modules/globalClass/world.js","webpack:///./resources/js/modules/index.js","webpack:///./resources/js/modules/setting/globalSetting.js","webpack:///./resources/js/modules/structOfDate/ExCoordinate.js","webpack:///./resources/js/modules/structOfDate/coordinate.js","webpack:///./resources/js/modules/structOfDate/size.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC,2BAA2B;;AAEnE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;;AAEJ;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uCAAuC,6BAA6B;AACpE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uCAAuC,6BAA6B;AACpE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uCAAuC,6BAA6B;AACpE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uCAAuC,6BAA6B;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,yBAAyB;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA,kBAAkB,UAAU;AAC5B;;AAEA,mBAAmB,UAAU;AAC7B;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACpUA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACXA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,C;;;;;;;;;;;;AC9HA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACPA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACZA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACfA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;ACZA;;AAEA;AACA;AACA;AACA;;;AAGA,iBAAiB,OAAO;AACxB;AACA,kBAAkB,OAAO;AACzB;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,OAAO;AACxB,kBAAkB,OAAO;AACzB;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA,sBAAsB,4BAA4B;AAClD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;ACzDA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,C;;;;;;;;;;;;AC3MA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,2BAA2B;AAC7C;AACA;AACA,mBAAmB,0BAA0B;AAC7C,wCAAwC,cAAc;AACtD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,mBAAmB,2BAA2B;;AAE9C;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;;AAElD;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,mBAAmB,0BAA0B;AAC7C;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA,wCAAwC,cAAc;AACtD;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACjTA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA,mB;;;;;;;;;;;;AC3CA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACTA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACVA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACPA;;AAEA;AACA;AACA;AACA;AACA;AACA,C","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./resources/js/modules/index.js\");\n","'use strict';\r\n\r\nconst GLOBAL_SETTING = new (require('../setting/globalSetting.js'))();\r\nconst Coor = require('../structOfDate/coordinate.js');\r\nconst ExCoor = require('../structOfDate/ExCoordinate.js');\r\nconst World = require('../globalClass/world.js');\r\nconst ControllerBlock = require('../globalClass/state/inerState/place/blocks/controllerBlock.js');\r\n\r\nmodule.exports = class Creature {\r\n\tconstructor (id, state, coor) {\r\n\t\tthis.isCreature = true;\r\n\t\tthis.patency = false;\r\n\t\tthis.nesting = true;\r\n\t\tthis.state = state;\r\n\t\tthis.id = id;\r\n\t\tthis.coor = coor;\r\n\r\n\t\tthis.visable = {};\r\n\t\tthis.visable.was = false;\r\n\t\tthis.visable.now = false;\r\n\t\tthis.visable = this._identifyVisable({newX: coor.x, newY: coor.y}, state);\r\n\r\n\t\tthis.classNameCSS = '';\r\n\t\tthis.classNameBackBlock = 'dirt';\r\n\t\tthis.idBackBlock = 1;\r\n\t\tthis.DOMObject = null;\r\n\r\n\t\tthis.health = 100;\r\n\t\tthis.attackDamage = 20;\r\n\t\tthis.attackRange = 100;\r\n\t\tthis.pursuitRange = 10;\r\n\r\n\t\tstate.setCoorPlayer(coor, id);\r\n\t}\r\n\r\n\tmovePerformance(direction) {\r\n\t\tif (direction === 'rand') {\r\n\t\t\tconst state = this.state;\r\n\t\t\tconst watcher = state.getWatcher();\r\n\t\t\tconst watcherX = watcher.coor.x;\r\n\t\t\tconst watcherY = watcher.coor.y;\r\n\t\t\tconst x = this.coor.x;\r\n\t\t\tconst y = this.coor.y;\r\n\t\t\tconst range = this.pursuitRange;\r\n\t\t\tif (\r\n\t\t\t\twatcherX > x - range\r\n\t\t\t&&\r\n\t\t\t\twatcherX < x + range\r\n\t\t\t&&\r\n\t\t\t\twatcherY < y + range\r\n\t\t\t&&\r\n\t\t\t\twatcherY > y -range\r\n\t\t\t){\r\n\t\t\t\tthis._approximatingToWatcher();\r\n\t\t\t} else {\r\n\t\t\t\tthis._randMove();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._move(direction);\r\n\t\t}\r\n\t}\r\n\r\n\tdoAttack(direction) {\r\n\t\tconst creature = this;\r\n\t\tconst state = this.state;\r\n\t\tconst world = state.getWorldObject();\r\n\r\n\t\tmakeAnimation(direction);\r\n\t\tcheckCreatureForAttack(direction);\r\n\r\n\t\tfunction makeAnimation(direction) {\r\n\t\t\tconst coor = creature.DOMObject.getBoundingClientRect();\r\n\r\n\t\t\tlet weapon = document.createElement('div');\r\n\t\t\tweapon.className = 'stackWeaponBall';\r\n\t\t\tweapon.style.left = coor.x + 'px';\r\n\t\t\tweapon.style.top = coor.y + 'px';\r\n\t\t\tcreature.state.getWeaponDiv().appendChild(weapon);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tlet needCoor = 0;\r\n\t\t\t\tlet max = 0;\r\n\t\t\t\tswitch(direction) {\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tneedCoor = coor.x - creature.attackRange * GLOBAL_SETTING.sizeBlock.width;\r\n\t\t\t\t\t\tweapon.style.left = (needCoor < 0 ? 0 : needCoor) + 'px';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tneedCoor = coor.x + creature.attackRange * GLOBAL_SETTING.sizeBlock.width;\r\n\t\t\t\t\t\tmax = GLOBAL_SETTING.sizeBlock.width * (World.getSize(state).widthBlocks - 1);\r\n\t\t\t\t\t\tweapon.style.left = (needCoor > max ? max : needCoor) + 'px';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tneedCoor = coor.y - creature.attackRange * GLOBAL_SETTING.sizeBlock.height;\r\n\t\t\t\t\t\tweapon.style.top = (needCoor < 0 ? 0 : needCoor ) + 'px';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\t\tneedCoor = coor.y + creature.attackRange * GLOBAL_SETTING.sizeBlock.height;\r\n\t\t\t\t\t\tmax = GLOBAL_SETTING.sizeBlock.height * (World.getSize(state).heightBlocks - 1);\r\n\t\t\t\t\t\tweapon.style.top = (needCoor > max ? max : needCoor) + 'px';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tweapon.remove();\r\n\t\t\t\t} ,2000);\r\n\t\t\t}, 100);\r\n\r\n\t\t\tif (lisenAttack === false) {\r\n\t\t\t\tworld.setAfterWorldRenderDoing(() => {\r\n\t\t\t\t\tconst weapon = state.getWeaponDiv();\r\n\t\t\t\t});\r\n\t\t\t\tlisenAttack = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction checkCreatureForAttack(direction) {\r\n\t\t}\r\n\t}\r\n\r\n\t_identifyVisable(coor, state) {\r\n\t\tconst visable = {};\r\n\t\tif (this.watcher === true) {\r\n\t\t\tvisable.now = true;\r\n\t\t\tvisable.was = true;\r\n\t\t} else {\r\n\t\t\tconst startPointWatch = this.state.getStartPiointWatch();\r\n\t\t\tconst size = World.getSize(state);\r\n\t\t\tvisable.was = this.visable.now;\r\n\t\t\tif (coor.newX - startPointWatch.x < size.heightBlocks\r\n\t\t\t&&\r\n\t\t\t\tcoor.newY - startPointWatch.y < size.widthBlocks\r\n\t\t\t&&\r\n\t\t\t\tcoor.newX - startPointWatch.x >= 0\r\n\t\t\t&&\r\n\t\t\t\tcoor.newY - startPointWatch.y >= 0\r\n\t\t\t) {\r\n\t\t\t\tvisable.now = true;\r\n\t\t\t} else {\r\n\t\t\t\tvisable.now = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn visable;\r\n\t}\r\n\r\n\t_move(direction) {\r\n\t\tconst id = this.id;\r\n\t\tconst ownObject = this;\r\n\t\tconst state = this.state;\r\n\r\n\r\n\t\tlet x = state.getCreature(id).coor.x;\r\n\t\tlet y = state.getCreature(id).coor.y;\r\n\r\n\t\tlet curCoor = new ExCoor(x, y, x, y);\r\n\r\n\t\tlet newPosition = null;\r\n\r\n\t\tswitch(direction) {\r\n\t\t\tcase 'right':\r\n\t\t\t\tif (GLOBAL_SETTING.numBlocks.width <= curCoor.y+1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcurCoor.newY++;\r\n\t\t\t\t\tnewPosition = state.getCellPlace({x:curCoor.x, y:(curCoor.y+1)});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\t\tif (0 > curCoor.y - 1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcurCoor.newY--;\r\n\t\t\t\t\tnewPosition = state.getCellPlace({x:curCoor.x, y:(curCoor.y-1)});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'up':\r\n\t\t\t\tif (0 > curCoor.x-1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcurCoor.newX--;\r\n\t\t\t\t\tnewPosition = state.getCellPlace({x:(curCoor.x-1), y:curCoor.y});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tif (GLOBAL_SETTING.numBlocks.height <= curCoor.x+1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcurCoor.newX++;\r\n\t\t\t\t\tnewPosition = state.getCellPlace({x:(curCoor.x+1), y:curCoor.y});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow 'empty direction on move creature: ' + this.id;\r\n\t\t}\r\n\r\n\t\tif (newPosition.patency === true) {\r\n\t\t\treturn moving(curCoor, this);\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction moving(coor, creature) {\r\n\t\t\tif (creature.watcher === true) {\r\n\t\t\t\tmovingPointAndBais(coor, creature, direction);\r\n\t\t\t}\r\n\r\n\t\t\tconst state = creature.state;\r\n\r\n\t\t\tcreature.visable = creature._identifyVisable(coor, state);\r\n\t\t\tcreature._movingVisableSwapingIcon(coor, state);\r\n\t\t\tchangeCoordinate(creature.state.getCreature(id), coor);\r\n\t\t\treturn true;\r\n\r\n\t\t\tfunction changeCoordinate(player, coor) {\r\n\t\t\t\tplayer.state.setCellPlace({\r\n\t\t\t\t\tx: player.state.getCreature(id).coor.x,\r\n\t\t\t\t\ty: player.state.getCreature(id).coor.y\r\n\t\t\t\t}, ControllerBlock.getBlockObject(player.idBackBlock));\r\n\r\n\t\t\t\tplayer.state.changeCoorPlayer({\r\n\t\t\t\t\tx: coor.newX,\r\n\t\t\t\t\ty: coor.newY\r\n\t\t\t\t}, id);\r\n\r\n\t\t\t\tplayer.state.setCellPlace({\r\n\t\t\t\t\tx: coor.newX,\r\n\t\t\t\t\ty: coor.newY\r\n\t\t\t\t}, player);\r\n\r\n\t\t\t\tplayer.coor.x = coor.newX;\r\n\t\t\t\tplayer.coor.y = coor.newY;\r\n\t\t\t}\r\n\r\n\t\t\tfunction movingPointAndBais(coor, creature, direction) {\r\n\t\t\t\tcreature.state.setBias(direction);\r\n\t\t\t\tcreature.state.setPointWatch({x:coor.newX, y:coor.newY}, creature);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_randMove() {\r\n\t\tlet digit = Math.floor(Math.random() * 4) + 1;\r\n\t\tlet direction = '';\r\n\t\tswitch(digit) {\r\n\t\t\tcase 1:\r\n\t\t\t\tdirection = 'left';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tdirection = 'right';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tdirection = 'up';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tdirection = 'down';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis._move(direction);\r\n\t\treturn true;\r\n\t}\r\n\r\n\t_approximatingToWatcher() {\r\n\t\tconst creature = this;\r\n\t\tconst range = creature.pursuitRange;\r\n\t\tconst side = (((range * 2) + 1) + 2); // (+1) - creature, (+2) - border\r\n\t\tconst state = creature.state;\r\n\t\tconst place = state.getAllPlace();\r\n\t\tconst startX = creature.coor.x - range;\r\n\t\tconst startY = creature.coor.y - range;\r\n\r\n\r\n\t\tlet localPlace = getLocalPlace();\r\n\r\n\t\tfunction getLocalPlace() {\r\n\t\t\tlet localPlace = [];\r\n\r\n\t\t\tlet cell = null;\r\n\r\n\t\t\tfor (let i = 0; i < side; i++) {\r\n\t\t\t\tlocalPlace[i] = [];\r\n\r\n\t\t\t\tfor (let j = 0; j < side; j++) {\r\n\t\t\t\t\tif (i === 0 || i === side - 1 || j === i || j === side - 1) {\r\n\t\t\t\t\t\tlocalPlace[i][j] = Infinity;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcell = place[startX + i][startY + j];\r\n\r\n\t\t\t\t\t\tif (cell.patency === true) {\r\n\t\t\t\t\t\t\tlocalPlace[i][j] = 0;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlocalPlace[i][j] = Infinity;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn localPlace;\r\n\t\t}\r\n\t}\r\n\r\n\t_movingVisableSwapingIcon(coor, state) {\r\n\t\tconst startPointWatch = this.state.getStartPiointWatch();\r\n\t\tconst world = this.state.getWorldDiv();\r\n\t\tconst size = World.getSize(state);\r\n\r\n\t\tlet div = getBlockWithCreature(this);\r\n\r\n\t\tif (this.visable.was === true) {\r\n\t\t\tthis.DOMObject.children[0].remove();\r\n\t\t\tthis.DOMObject = null;\r\n\t\t}\r\n\r\n\t\tif (this.visable.now === true) {\r\n\t\t\tworld.children[coor.newX - startPointWatch.x].children[coor.newY - startPointWatch.y].appendChild(div);\r\n\t\t\tthis.DOMObject = div.parentNode;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t\tfunction getBlockWithCreature(creature) {\r\n\t\t\tlet div = document.createElement('div');\r\n\t\t\tdiv.className = creature.classNameCSS;\r\n\t\t\treturn div;\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n\r\nconst Creature = require('./creature');\r\n\r\nmodule.exports = class Enemy extends Creature {\r\n\tconstructor (id, state, coor) {\r\n\t\tsuper(id, state, coor);\r\n\t\tthis.type = 'enemy';\r\n\t\tthis.classNameCSS = 'slimeEnemy';\r\n\t\tthis.watcher = false;\r\n\t}\r\n}","'use strict';\r\n\r\nconst Creature = require('./creature');\r\n\r\nmodule.exports = class Player extends Creature {\r\n\tconstructor (id, state, watcher, coor, profession) {\r\n\t\tsuper(id, state, coor);\r\n\t\tthis.type = 'player';\r\n\r\n\t\tif (watcher === true){\r\n\t\t\tthis.watcher = true;\r\n\t\t\tstate.setPointWatch(coor, this);\r\n\t\t\tthis.visable = {\r\n\t\t\t\twas: true,\r\n\t\t\t\tnow: true\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tthis.watcher = false;\r\n\t\t}\r\n\r\n\t\tswitch(profession) {\r\n\t\t\tcase 'mage':\r\n\t\t\t\tthis.classNameCSS = 'magePlayer';\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n\r\nconst State = require('./state/state.js');\r\nconst World = require('./world.js');\r\nconst GLOBAL_SETTING_CLASS = require('../setting/globalSetting.js');\r\nconst GLOBAL_SETTING = new GLOBAL_SETTING_CLASS();\r\n\r\nmodule.exports = class ControllerGame {\r\n\tconstructor (players = null, enemy = []) {\r\n\t\tlet numCreature = 0;\r\n\r\n\t\tthis.state = new State(GLOBAL_SETTING.numBlocks);\r\n\t\tsetPlayers(players, this.state);\r\n\r\n\t\tconst startPoint = getStartPiointWatch(players, this.state);\r\n\r\n\t\tif (startPoint === false) {\r\n\t\t\tthrow \"2 or more main player or null\";\r\n\t\t} else {\r\n\t\t\tthis.state.setStartPointWatch(startPoint);\r\n\t\t}\r\n\r\n\t\tenemy = enemy.concat(World.makeAroayWihtEnemy(1000, this.state));\r\n\t\tsetEnemys(enemy, this.state);\r\n\r\n\t\tthis.world = new World(this.state);\r\n\t\tconst worldDiv = this.world.renderWorld(true);\r\n\t\tthis.weaponDiv = createWeaponDiv();\r\n\r\n\t\tthis.state.setWeaponDiv(this.weaponDiv);\r\n\t\tthis.state.setWorldDiv(worldDiv);\r\n\t\tthis.state.setWorldObject(this.world);\r\n\r\n\t\tfunction createWeaponDiv() {\r\n\t\t\tlet weapon = document.createElement('div');\r\n\t\t\tweapon.className = 'weapon';\r\n\t\t\tdocument.querySelector('body').appendChild(weapon);\r\n\t\t\treturn weapon;\r\n\t\t}\r\n\r\n\t\tfunction setPlayers(players, state) {\r\n\t\t\tif (players !== null) {\r\n\t\t\t\tplayers.forEach((val) => {\r\n\t\t\t\t\tstate.setPlayer(numCreature++, val);\r\n\t\t\t\t});\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction setEnemys(enemys, state) {\r\n\t\t\tif (enemys !== null) {\r\n\t\t\t\tenemys.forEach((val) => {\r\n\t\t\t\t\tstate.setEnemy(numCreature++, val);\r\n\t\t\t\t});\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getStartPiointWatch(players, state) {\r\n\t\t\tlet watcher = players.filter(player => {\r\n\t\t\t\treturn player.watcher;\r\n\t\t\t});\r\n\r\n\t\t\tif (watcher.length !== 1) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\twatcher = watcher[0];\r\n\t\t\t}\r\n\r\n\t\t\tconst size = World.getSize(state);\r\n\r\n\t\t\tlet x = watcher.coor.x;\r\n\t\t\tlet y = watcher.coor.y;\r\n\t\t\tlet startPointWatch = {};\r\n\r\n\t\t\tstartPointWatch.x = findX(x, size);\r\n\t\t\tstartPointWatch.y = findY(y, size);\r\n\r\n\t\t\treturn startPointWatch;\r\n\r\n\t\t\tfunction findX (x, size) {\r\n\t\t\t\tlet newX = 0;\r\n\r\n\t\t\t\tif (x < Math.floor(size.heightBlocks / 2)) {\r\n\t\t\t\t\tnewX = 0;\r\n\t\t\t\t} else if (x >= (GLOBAL_SETTING.numBlocks.height - Math.floor(size.heightBlocks / 2))) {\r\n\t\t\t\t\tnewX = GLOBAL_SETTING.numBlocks.height - Math.floor(size.heightBlocks / 2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewX = x - Math.floor(size.heightBlocks / 2) + 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn newX;\r\n\t\t\t}\r\n\r\n\t\t\tfunction findY (y, size) {\r\n\t\t\t\tlet newY = 0;\r\n\r\n\t\t\t\tif (y < Math.floor(size.widthBlocks / 2)) {\r\n\t\t\t\t\tnewY = 0;\r\n\t\t\t\t} else if (y >= (GLOBAL_SETTING.numBlocks.width - Math.floor(size.widthBlocks / 2))) {\r\n\t\t\t\t\tnewY = GLOBAL_SETTING.numBlocks.width - Math.floor(size.widthBlocks / 2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewY = y - Math.floor(size.widthBlocks / 2) + 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn newY;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetState() {\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\ttactOfGame() {\r\n\t\tthis.world.renderWorld();\r\n\t\tthis.state._creature.forEach((item) => {\r\n\t\t\tif (item.watcher !== true) {\r\n\t\t\t\titem.movePerformance('rand');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","'use strict';\r\n\r\nmodule.exports = class Block {\r\n\tconstructor() {\r\n\t\tthis.nesting = false;\r\n\t\tthis.isCreature = false;\r\n\t}\r\n}","'use strict';\r\n\r\nconst Block = require('./block.js');\r\n\r\nmodule.exports = class BorderBlock extends Block {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.type = 'border';\r\n\t\tthis.idBlock = 2;\r\n\t\tthis.patency = false;\r\n\t\tthis.classNameCSS = 'border';\r\n\t}\r\n}","'use strict';\r\nconst BorderBlock = require('./borderblock.js');\r\nconst DirtBlock = require('./dirtblock.js');\r\n\r\nmodule.exports = class BlockController {\r\n\tconstructor (){}\r\n\r\n\tstatic getBlockObject(id) {\r\n\t\tswitch(id) {\r\n\t\t\tcase 1:\r\n\t\t\t\treturn new DirtBlock();\r\n\t\t\tcase 2:\r\n\t\t\t\treturn new BorderBlock();\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n\r\nconst Block = require('./block.js');\r\n\r\nmodule.exports = class DirtBlock extends Block {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.type = 'dirt';\r\n\t\tthis.idBlock = 1;\r\n\t\tthis.patency = true;\r\n\t\tthis.classNameCSS = 'dirt';\r\n\t}\r\n}","const ControllerBlock = require('./blocks/controllerBlock.js');\r\n\r\nmodule.exports = class Place {\r\n\tconstructor (config) {\r\n\t\tconst N = config.height;\r\n\t\tconst M = config.width;\r\n\r\n\r\n\t\tfor (let i = 0; i < N; i++) {\r\n\t\t\tthis[i] = [];\r\n\t\t\tfor (let j = 0; j < M; j++) {\r\n\t\t\t\tif (i === 0 || i + 1 === N || j === 0 || j + 1 === M){\r\n\t\t\t\t\tthis[i][j] = ControllerBlock.getBlockObject(2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis[i][j] = ControllerBlock.getBlockObject(1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddRoom () {\r\n\t\tfor (let i = 0; i < N; i+= 8) {\r\n\t\t\tfor (let j = 0; j < M; j++) {\r\n\t\t\t\tconst randDigit = Math.floor(Math.random() * 400);\r\n\t\t\t\tif (randDigit > 9 && randDigit < 25) {\r\n\t\t\t\t\tfor (let k = j; k < j+randDigit && k < M; k++) {\r\n\t\t\t\t\t\tif (k === j) {\r\n\t\t\t\t\t\t\tfor (let n = i; n < i+randDigit+1 && n < N; n++) {\r\n\t\t\t\t\t\t\t\tthis[n][k] = ControllerBlock.getBlockObject(2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis[i][k] = ControllerBlock.getBlockObject(2);\r\n\t\t\t\t\t\t\tthis[(i+randDigit >= N ? i : i+randDigit)][k] = ControllerBlock.getBlockObject(2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tj+= 8;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetCell(x, y) {\r\n\t\treturn this[x][y];\r\n\t}\r\n\r\n\tsetCell(x, y, val) {\r\n\t\tif (typeof val === 'object') {\r\n\t\t\tthis[x][y] = val;\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetAllPlace() {\r\n\t\treturn this;\r\n\t}\r\n}","'use strict';\r\n\r\nconst Place = require('./inerState/place/place.js');\r\n\r\nconst Player = require('../../creatures/player.js');\r\nconst Enemy = require('../../creatures/enemy.js');\r\n\r\nconst Coor = require('../../structOfDate/coordinate.js');\r\n\r\nmodule.exports = class State {\r\n\tconstructor (config) {\r\n\r\n\t\tthis._place = new Place(config);\r\n\t\tthis._place.addRoom();\r\n\r\n\t\tthis._creature = [];\r\n\r\n\t\tthis._pointWatch = {};\r\n\t\tthis._startPointWatch = {x:0, y:0};\r\n\t\tthis._bias = null;\r\n\r\n\t\tthis._weaponDiv = null;\r\n\t\tthis._worldDiv = null;\r\n\t\tthis._worldObject = null;\r\n\r\n\t\tthis._sizeWorld = {\r\n\t\t\tfirstFindSize: true,\r\n\t\t\tsizeG: null\r\n\t\t};\r\n\t}\r\n\r\n\tgetSizeWorld() {\r\n\t\treturn this._sizeWorld;\r\n\t}\r\n\r\n\tsetFirstFindSize(sizeWorld) {\r\n\t\tthis._sizeWorld = sizeWorld;\r\n\t}\r\n\r\n\tsetCoorPlayer(coor, num = 0) {\r\n\t\tthis._creature[num] = {};\r\n\t\tthis._creature[num].coor = coor;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tsetPlayer(id = 0 , val) {\r\n\t\tthis._creature[id] = new Player(id, this, val.watcher, val.coor, val.type);\r\n\t\tthis._place[val.coor.x][val.coor.y] = this._creature[id];\r\n\t\treturn true;\r\n\t}\r\n\r\n\tsetEnemy(id = 0 , val) {\r\n\t\tthis._creature[id] = new Enemy(id, this, val.coor, val.type);\r\n\t\tthis._place.setCell(val.coor.x, val.coor.y, this._creature[id]);\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgetCreature(id = 0) {\r\n\t\tif (typeof +id !== 'number') {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn this._creature[id];\r\n\t\t}\r\n\t}\r\n\r\n\tgetAllCreature() {\r\n\t\treturn this._creature;\r\n\t}\r\n\r\n\tgetAllPlace() {\r\n\t\treturn this._place.getAllPlace();\r\n\t}\r\n\r\n\tgetCellPlace(coor) {\r\n\t\treturn this._place.getCell(coor.x, coor.y);\r\n\t}\r\n\r\n\tsetCellPlace(coor, val) {\r\n\t\tif (val.isCreature === true) {\r\n\t\t\tval.idBackBlock = this._place.getCell(coor.x, coor.y).idBlock;\r\n\t\t\tval.classNameBackBlock = this._place.getCell(coor.x, coor.y).classNameCSS;\r\n\t\t}\r\n\r\n\t\tthis._place.setCell(coor.x, coor.y, val);\r\n\t\treturn true;\r\n\t}\r\n\r\n\tchangeCoorPlayer(coor, id = 0) {\r\n\t\tthis._creature[id].coor.x = coor.x;\r\n\t\tthis._creature[id].coor.y = coor.y;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tsetBias(direction) {\r\n\t\tthis._bias = direction;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgetBias(remove) {\r\n\t\tif (this._bias !== undefined) {\r\n\t\t\tlet OldValue = this._bias;\r\n\t\t\tif (remove === true) {\r\n\t\t\t\tthis._bias = null;\r\n\t\t\t}\r\n\t\t\treturn OldValue;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tsetPointWatch(coor, watcher) {\r\n\t\tthis._pointWatch.x = coor.x;\r\n\t\tthis._pointWatch.y = coor.y;\r\n\t\tthis._pointWatch.watcher = watcher;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tchangePointWatch(bais) {\r\n\t\tswitch(bais) {\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._pointWatch.y++;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\t\tthis._pointWatch.y--;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'up':\r\n\t\t\t\tthis._pointWatch.x--;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._pointWatch.x++;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgetPiointWatch() {\r\n\t\treturn this._pointWatch;\r\n\t}\r\n\r\n\tsetStartPointWatch(coor) {\r\n\t\tthis._startPointWatch.x = coor.x;\r\n\t\tthis._startPointWatch.y = coor.y;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgetStartPiointWatch() {\r\n\t\treturn this._startPointWatch;\r\n\t}\r\n\r\n\tchangeStartPointWatch(bais) {\r\n\t\tswitch(bais) {\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._startPointWatch.y++;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\t\tthis._startPointWatch.y--;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'up':\r\n\t\t\t\tthis._startPointWatch.x--;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._startPointWatch.x++;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tsetWeaponDiv(weaponDiv) {\r\n\t\tthis._weaponDiv = weaponDiv;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tsetWorldDiv(worldDiv) {\r\n\t\tthis._worldDiv = worldDiv;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgetWorldDiv() {\r\n\t\treturn this._worldDiv;\r\n\t}\r\n\r\n\tgetWeaponDiv() {\r\n\t\treturn this._weaponDiv;\r\n\t}\r\n\r\n\tsetWorldObject(obj) {\r\n\t\tthis._worldObject = obj;\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgetWorldObject() {\r\n\t\treturn this._worldObject;\r\n\t}\r\n\r\n\tgetWatcher() {\r\n\t\tif (this._pointWatch.watcher) {\r\n\t\t\treturn this._pointWatch.watcher;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n\r\nconst GLOBAL_SETTING = new (require('../setting/globalSetting.js'))();\r\nconst State = require('./state/state.js')\r\n\r\nconst Coor = require('../structOfDate/coordinate.js');\r\n\r\nmodule.exports = class World {\r\n\tconstructor(state) {\r\n\t\tthis.state = state;\r\n\t\tthis.size = World.getSize(state);\r\n\t\tthis.afterWorldRenderDoing = [];\r\n\t}\r\n\r\n\tstatic getSize(state) {\r\n\t\tlet firstFindSize = state.getSizeWorld().firstFindSize;\r\n\r\n\t\tif (firstFindSize === true){\r\n\r\n\t\t\tconst widthBlocks = Math.floor(window.innerWidth / GLOBAL_SETTING.sizeBlock.width);\r\n\t\t\tconst heightBlocks = Math.floor(window.innerHeight / GLOBAL_SETTING.sizeBlock.height);\r\n\r\n\t\t\tlet sizeG = {\r\n\t\t\t\twidthBlocks: (widthBlocks < GLOBAL_SETTING.numBlocks.width ? widthBlocks : GLOBAL_SETTING.numBlocks.width),\r\n\t\t\t\theightBlocks: (heightBlocks < GLOBAL_SETTING.numBlocks.height ? heightBlocks : GLOBAL_SETTING.numBlocks.height)\r\n\t\t\t};\r\n\r\n\t\t\tstate.setFirstFindSize({\r\n\t\t\t\tfirstFindSize: true,\r\n\t\t\t\tsizeG: sizeG\r\n\t\t\t});\r\n\r\n\t\t\treturn sizeG;\r\n\t\t} else {\r\n\t\t\treturn state.getSizeWorld().sizeG;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic makeAroayWihtEnemy(num, state) {\r\n\t\tconst size = World.getSize(state);\r\n\r\n\t\tlet creatures = [];\r\n\t\tfor (let i = 0; i < num; i++) {\r\n\t\t\tlet newCreature = {};\r\n\t\t\tnewCreature.coor = new Coor();\r\n\t\t\tnewCreature.type = 'slime';\r\n\t\t\tnewCreature.coor.x = Math.floor(Math.random() * (GLOBAL_SETTING.numBlocks.height - 2)) + 1;\r\n\t\t\tnewCreature.coor.y = Math.floor(Math.random() * (GLOBAL_SETTING.numBlocks.width - 2)) + 1;\r\n\t\t\tcreatures[i] = newCreature;\r\n\t\t}\r\n\t\treturn creatures;\r\n\t}\r\n\r\n\tsetAfterWorldRenderDoing(func) {\r\n\t\tthis.afterWorldRenderDoing.push(func);\r\n\t}\r\n\r\n\tdoAfterWorldRenderDoing() {\r\n\t\tthis.afterWorldRenderDoing.forEach((func) => {\r\n\t\t\tfunc();\r\n\t\t});\r\n\t}\r\n\r\n\trenderWorld(startRender) {\r\n\t\tconst state = this.state;\r\n\t\tconst size = this.size;\r\n\t\tconst bias = state.getBias(true);\r\n\r\n\t\tif (bias === null && startRender === true) {\r\n\t\t\tlet world = getEmptyWorld();\r\n\r\n\t\t\trendersBlocks(world, state, size);\r\n\t\t\tdeliteOldWorld();\r\n\t\t\tpushNewWorld(world);\r\n\r\n\t\t\treturn world;\r\n\t\t} else if (canIBias(size, state, bias) === true) {\r\n\t\t\tbiasRender(this, bias);\r\n\t\t\tstate.changeStartPointWatch(bias);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t\tfunction canIBias(size, state, bias) {\r\n\t\t\tconst startPointWatch = state.getStartPiointWatch();\r\n\t\t\tconst pointWotch = state.getPiointWatch();\r\n\r\n\t\t\tif (\r\n\t\t\t(((startPointWatch.x === 0\r\n\t\t\t\t\t||\r\n\t\t\tstartPointWatch.x === GLOBAL_SETTING.numBlocks.height - size.heightBlocks)\r\n\t\t\t\t&&\r\n\t\t\t(pointWotch.x < Math.floor(size.heightBlocks / 2)\r\n\t\t\t\t\t||\r\n\t\t\tpointWotch.x >= (GLOBAL_SETTING.numBlocks.height - Math.floor(size.heightBlocks / 2)))\r\n\t\t\t\t&&\r\n\t\t\t(bias === 'up'\r\n\t\t\t\t\t||\r\n\t\t\tbias === 'down'))\r\n\t\t\t||\r\n\t\t\t((startPointWatch.y === 0\r\n\t\t\t\t\t||\r\n\t\t\tstartPointWatch.y === GLOBAL_SETTING.numBlocks.width - size.widthBlocks)\r\n\t\t\t\t&&\r\n\t\t\t(pointWotch.y < Math.floor(size.widthBlocks / 2)\r\n\t\t\t\t\t||\r\n\t\t\tpointWotch.y >= (GLOBAL_SETTING.numBlocks.width - Math.floor(size.widthBlocks / 2)))\r\n\t\t\t\t&&\r\n\t\t\t(bias === 'left'\r\n\t\t\t\t\t||\r\n\t\t\tbias === 'right')))\r\n\t\t\t){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction getEmptyWorld() {\r\n\t\t\tlet world = document.createElement('div');\r\n\t\t\tworld.className = 'world';\r\n\t\t\treturn world;\r\n\t\t}\r\n\r\n\t\tfunction deliteOldWorld() {\r\n\t\t\tlet world = state.getWorldDiv();\r\n\t\t\tif (world !== null) {\r\n\t\t\t\tworld.remove();\r\n\t\t\t\tstate.setWorldDiv = null;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction pushNewWorld(world) {\r\n\t\t\tdocument.querySelector('.wrapper').appendChild(world);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction rendersBlocks(world, state, size) {\r\n\t\t\tconst x = state.getStartPiointWatch().x;\r\n\t\t\tconst y = state.getStartPiointWatch().y;\r\n\t\t\tconst place = state.getAllPlace();\r\n\r\n\t\t\tfor (let i = x; i < x + size.heightBlocks; i++) {\r\n\t\t\t\tlet row = document.createElement('div');\r\n\t\t\t\trow.className = 'row';\r\n\t\t\t\tfor (let j = y; j < y + size.widthBlocks; j++) {\r\n\t\t\t\t\tlet block = getBlock(place[i][j], {newX:i,newY:j});\r\n\t\t\t\t\trow.appendChild(block);\r\n\t\t\t\t}\r\n\t\t\t\tworld.appendChild(row);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction biasRender(world, bias) {\r\n\t\t\tconst state = world.state;\r\n\t\t\tconst size = world.size;\r\n\t\t\tconst place = state.getAllPlace();\r\n\t\t\tconst oldWorld = state.getWorldDiv();\r\n\t\t\tconst startPointWatch = state.getStartPiointWatch();\r\n\r\n\t\t\tif (bias === 'right' || bias === 'left') {\r\n\t\t\t\tleftRightBias();\r\n\t\t\t} else if (bias === 'up' || bias === 'down') {\r\n\t\t\t\tupDownBias();\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tworld.doAfterWorldRenderDoing();\r\n\r\n\t\t\tstate.changePointWatch(bias);\r\n\t\t\treturn true;\r\n\r\n\t\t\tfunction leftRightBias() {\r\n\t\t\t\tconst x = state.getStartPiointWatch().x;\r\n\r\n\t\t\t\tfor (let i = x; i < x + size.heightBlocks; i++) {\r\n\r\n\t\t\t\t\tlet y = 0;\r\n\t\t\t\t\tlet newY = 0;\r\n\r\n\t\t\t\t\tif (bias === 'right') {\r\n\t\t\t\t\t\ty = state.getStartPiointWatch().y + size.widthBlocks;\r\n\t\t\t\t\t\tnewY = y - size.widthBlocks;\r\n\t\t\t\t\t} else if (bias === 'left') {\r\n\t\t\t\t\t\ty = state.getStartPiointWatch().y - 1;\r\n\t\t\t\t\t\tnewY = y + size.widthBlocks;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (place[i][newY].isCreature === true) {\r\n\t\t\t\t\t\tvisableHideCreature(place[i][newY]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet block = null;\r\n\t\t\t\t\tblock = getBlock(place[i][y], {newX:i,newY:y}, true);\r\n\r\n\t\t\t\t\tlet line = oldWorld.children[i-x];\r\n\t\t\t\t\tlet idBlockForRemove = 0;\r\n\r\n\t\t\t\t\tif (bias === 'right') {\r\n\t\t\t\t\t\tidBlockForRemove = 0;\r\n\r\n\t\t\t\t\t\tline.children[idBlockForRemove].remove();\r\n\t\t\t\t\t\tline.appendChild(block);\r\n\t\t\t\t\t} else if (bias === 'left') {\r\n\t\t\t\t\t\tidBlockForRemove = line.children.length - 1;\r\n\r\n\t\t\t\t\t\tline.children[idBlockForRemove].remove();\r\n\t\t\t\t\t\tline.insertBefore(block, oldWorld.children[i-x].children[0]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction upDownBias() {\r\n\t\t\t\tconst y = state.getStartPiointWatch().y;\r\n\r\n\t\t\t\tlet row = document.createElement('div');\r\n\t\t\t\trow.className = 'row';\r\n\r\n\t\t\t\tfor (let i = y; i < y + size.widthBlocks; i++) {\r\n\t\t\t\t\tlet x = 0;\r\n\t\t\t\t\tlet newX = 0;\r\n\r\n\t\t\t\t\tif (bias === 'up') {\r\n\t\t\t\t\t\tx = state.getStartPiointWatch().x - 1;\r\n\t\t\t\t\t\tnewX = x + size.heightBlocks;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tx = state.getStartPiointWatch().x + size.heightBlocks;\r\n\t\t\t\t\t\tnewX = x - size.heightBlocks;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet block = getBlock(place[x][i], {newX:x,newY:i}, true);\r\n\t\t\t\t\trow.appendChild(block);\r\n\r\n\r\n\t\t\t\t\tif (place[newX][i].isCreature === true) {\r\n\t\t\t\t\t\tvisableHideCreature(place[newX][i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (bias === 'up') {\r\n\t\t\t\t\toldWorld.children[oldWorld.children.length-1].remove();\r\n\t\t\t\t\toldWorld.insertBefore(row, oldWorld.children[0]);\r\n\t\t\t\t} else if (bias === 'down') {\r\n\t\t\t\t\toldWorld.children[0].remove();\r\n\t\t\t\t\toldWorld.appendChild(row);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getBlock(blockObject, coor, bias) {\r\n\t\t\tlet block = document.createElement('div');\r\n\r\n\t\t\tif (blockObject.nesting === true) {\r\n\t\t\t\tblock.className = 'standartPlace ' + blockObject.classNameBackBlock;\r\n\r\n\t\t\t\tif (blockObject.isCreature === true) {\r\n\t\t\t\t\tgetCreature(block, blockObject, coor);\r\n\t\t\t\t\tblockObject.DOMObject = block;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tchangeVisableCreature();\r\n\t\t\t} else {\r\n\t\t\t\tblock.className = 'standartPlace ' + blockObject.classNameCSS;\r\n\t\t\t}\r\n\r\n\t\t\treturn block;\r\n\r\n\t\t\tfunction getCreature(block, creature, coor) {\r\n\t\t\t\tlet div = document.createElement('div');\r\n\t\t\t\tdiv.className = creature.classNameCSS;\r\n\t\t\t\tblock.appendChild(div);\r\n\r\n\t\t\t\tif (bias === true) {\r\n\t\t\t\t\tcreature.visable.was = false;\r\n\t\t\t\t\tcreature.visable.now = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction changeVisableCreature() {\r\n\t\t\t\tblockObject.visable = {\r\n\t\t\t\t\twas: blockObject.visable.now,\r\n\t\t\t\t\tnow: true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction visableHideCreature(creature) {\r\n\t\t\tcreature.visable.was = true;\r\n\t\t\tcreature.visable.now = false;\r\n\t\t}\r\n\t}\r\n}","'use strict';\r\n/*\r\n\ttask:\r\n\t\t0.bias weapon after bais world\r\n\t\t1.reRender without bais and reRender All world\r\n*/\r\n\r\nconst GLOBAL_SETTING = new require('./setting/globalSetting.js');\r\nconst ControllerGame = require('./globalClass/game.js');\r\n\r\nconst game = new ControllerGame([{\r\n\tcoor: {\r\n\t\tx: 1,\r\n\t\ty: 1\r\n\t},\r\n\ttype: 'mage',\r\n\twatcher: true\r\n}]);\r\n\r\nconst state = game.getState();\r\nconst player = state.getCreature(0);\r\n\r\ndocument.onkeydown = function (e) {\r\n\tif (e.keyCode === 68) {\r\n\t\tplayer.movePerformance('right');\r\n\t} else if (e.keyCode === 83) {\r\n\t\tplayer.movePerformance('down');\r\n\t} else if (e.keyCode === 87) {\r\n\t\tplayer.movePerformance('up');\r\n\t} else if (e.keyCode === 65) {\r\n\t\tplayer.movePerformance('left');\r\n\t} else if (e.keyCode === 39) {\r\n\t\tplayer.doAttack('right');\r\n\t} else if (e.keyCode === 40) {\r\n\t\tplayer.doAttack('down');\r\n\t} else if (e.keyCode === 38) {\r\n\t\tplayer.doAttack('up');\r\n\t} else if (e.keyCode === 37) {\r\n\t\tplayer.doAttack('left');\r\n\t}\r\n\tgame.tactOfGame();\r\n}\r\n\r\nconsole.log(state);","'use strict';\r\n\r\nconst Size = require('../structOfDate/size.js');\r\n\r\nmodule.exports = class GLOBAL_SETTING {\r\n\tconstructor() {\r\n\t\tthis.sizeBlock = new Size(50, 50);\r\n\t\tthis.numBlocks = new Size(2 ** 10, 2 ** 10);\r\n\t}\r\n}","'use strict';\r\n\r\nconst Coor = require('./coordinate.js');\r\n\r\nmodule.exports = class ExCoor extends Coor {\r\n\tconstructor (x = 0, y = 0, newX = 0, newY = 0) {\r\n\t\tsuper(x, y);\r\n\t\tthis.newX = newX;\r\n\t\tthis.newY = newY;\r\n\t}\r\n}","'use strict';\r\n\r\nmodule.exports = class Coor {\r\n\tconstructor(x = 0, y = 0) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n}","'use strict';\r\n\r\nmodule.exports = class Size {\r\n\tconstructor(width = 0, height = 0) {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n}"],"sourceRoot":""}